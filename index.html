<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å°è·‘æ­¥ç‹</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ERJQSXTBGE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ERJQSXTBGE');
    </script>
</head>
<body>
    <h1>å°å°è·‘æ­¥ç‹</h1>
    <div id="game-area">
        <div class="track" id="track1">
            <img src="images/pig.svg" alt="å°çŒª" class="runner" id="runner1">
        </div>
        <div class="track" id="track2">
            <img src="images/dragon.svg" alt="å°é¾™" class="runner" id="runner2">
        </div>
        <div class="finish-line"></div>
    </div>
    <div id="controls">
        <button id="btn1">ç©å®¶1 è·‘æ­¥ (A)</button>
        <button id="btn2">ç©å®¶2 è·‘æ­¥ (L)</button>
        <button id="resetBtn">é‡å¼€ä¸€å±€</button>
    </div>
    <div id="winner"></div>
    <div id="leaderboard">
        <h2>ğŸ† æ’è¡Œæ¦œ</h2>
        <div id="leaderboard-content">
            <div class="leaderboard-item">
                <span class="rank">1</span>
                <span class="player">å°çŒª</span>
                <span class="wins">0</span>
            </div>
            <div class="leaderboard-item">
                <span class="rank">2</span>
                <span class="player">å°é¾™</span>
                <span class="wins">0</span>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    
    <!-- GA4 Event Tracking -->
    <script>
        // é¡µé¢æµè§ˆäº‹ä»¶
        gtag('event', 'page_view', {
            page_title: 'å°å°è·‘æ­¥ç‹',
            page_location: window.location.href
        });
        
        // ç‚¹å‡»äº‹ä»¶è·Ÿè¸ª
        document.addEventListener('click', function(e) {
            let eventName = 'click';
            let eventCategory = 'engagement';
            let eventLabel = e.target.tagName.toLowerCase();
            
            // ç‰¹å®šæŒ‰é’®ç‚¹å‡»è·Ÿè¸ª
            if (e.target.id === 'btn1') {
                eventName = 'player1_click';
                eventCategory = 'game_action';
                eventLabel = 'ç©å®¶1è·‘æ­¥æŒ‰é’®';
            } else if (e.target.id === 'btn2') {
                eventName = 'player2_click';
                eventCategory = 'game_action';
                eventLabel = 'ç©å®¶2è·‘æ­¥æŒ‰é’®';
            } else if (e.target.id === 'resetBtn') {
                eventName = 'reset_game';
                eventCategory = 'game_action';
                eventLabel = 'é‡å¼€ä¸€å±€æŒ‰é’®';
            } else if (e.target.closest('#leaderboard')) {
                eventName = 'leaderboard_interaction';
                eventCategory = 'game_action';
                eventLabel = 'æ’è¡Œæ¦œäº¤äº’';
            }
            
            gtag('event', eventName, {
                event_category: eventCategory,
                event_label: eventLabel,
                value: 1
            });
        });
        
        // é”®ç›˜äº‹ä»¶è·Ÿè¸ª
        document.addEventListener('keydown', function(e) {
            if (e.key === 'a' || e.key === 'A') {
                gtag('event', 'keyboard_action', {
                    event_category: 'game_action',
                    event_label: 'ç©å®¶1é”®ç›˜æ§åˆ¶(Aé”®)',
                    value: 1
                });
            } else if (e.key === 'l' || e.key === 'L') {
                gtag('event', 'keyboard_action', {
                    event_category: 'game_action',
                    event_label: 'ç©å®¶2é”®ç›˜æ§åˆ¶(Lé”®)',
                    value: 1
                });
            }
        });
        
        // æ»šåŠ¨äº‹ä»¶è·Ÿè¸ª
        let scrollTracked = false;
        window.addEventListener('scroll', function() {
            if (!scrollTracked) {
                const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
                
                if (scrollPercent >= 90) {
                    gtag('event', 'scroll_to_bottom', {
                        event_category: 'engagement',
                        event_label: 'æ»šåŠ¨åˆ°åº•éƒ¨',
                        value: scrollPercent
                    });
                    scrollTracked = true;
                }
            }
        });
        
        // æ¸¸æˆèƒœåˆ©äº‹ä»¶è·Ÿè¸ªï¼ˆåœ¨script.jsä¸­è°ƒç”¨ï¼‰
        window.trackGameWin = function(winner) {
            gtag('event', 'game_win', {
                event_category: 'game_result',
                event_label: winner + 'è·èƒœ',
                value: 1
            });
        };
        
        // æ¸¸æˆé‡ç½®äº‹ä»¶è·Ÿè¸ªï¼ˆåœ¨script.jsä¸­è°ƒç”¨ï¼‰
        window.trackGameReset = function() {
            gtag('event', 'game_reset', {
                event_category: 'game_action',
                event_label: 'æ¸¸æˆé‡ç½®',
                value: 1
            });
        };
    </script>
</body>
</html> 